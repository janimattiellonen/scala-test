@(message: String, cats: List[(String, String)])
@import helper._


@tube(text: String) = @{
	import scala.util.matching.Regex
	import java.util.regex.Pattern
	var m = Pattern.compile("""https?://(?:[0-9a-zA-Z-]+\.)?(?:youtu\.be/|youtube\.com\S*[^\w\-\s])([\w \-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:[\'"][^<>]*>|</a>))[?=&+%\w-]*""").matcher(text)
		
	if (m.find()){
		m.group(1)
	}
}

@main("Cats") {
	
	<h1>Best cat videos</h1>
	
	<div class="cats">
	@for(cat <- cats) {
		<div>
			<h2>@cat._1</h2>
			
			<iframe width="420" height="315" src="http://www.youtube.com/embed/@tube(cat._2)" frameborder="0" allowfullscreen></iframe>
		</div>
	}
	</div>
}
